<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="依法不依人，依义不依语。">
<meta property="og:type" content="website">
<meta property="og:title" content="如是我闻">
<meta property="og:url" content="http://flyingliu.github.io/page/2/index.html">
<meta property="og:site_name" content="如是我闻">
<meta property="og:description" content="依法不依人，依义不依语。">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="如是我闻">
<meta name="twitter:description" content="依法不依人，依义不依语。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://flyingliu.github.io/page/2/"/>





  <title>如是我闻</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">如是我闻</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">色即是空，空即是色</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://flyingliu.github.io/2017/08/16/myproject/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="飞来小侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="如是我闻">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/16/myproject/" itemprop="url">我的一些项目</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-16T01:08:52+08:00">
                2017-08-16
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/08/16/myproject/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/08/16/myproject/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><a href="http://test.minuteschina.com/activity_whiteningQuiz.html" target="_blank" rel="external">一分钟叫你正确美白</a></li>
<li><a href="http://test.minuteschina.com/activity_lbd.html" target="_blank" rel="external">奥黛莉赫本</a></li>
<li><a href="http://flyingliu.github.io/mydemo/jiang/www/">幸运大抽奖</a></li>
<li><a href="http://flyingliu.github.io/mydemo/yc/#/">宜春旅游资讯网</a></li>
<li><a href="http://flyingliu.github.io/shanghu/">尚湖风景区</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://flyingliu.github.io/2017/08/16/js-extent/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="飞来小侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="如是我闻">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/16/js-extent/" itemprop="url">JS里面向对象中的继承</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-16T00:45:53+08:00">
                2017-08-16
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/08/16/js-extent/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/08/16/js-extent/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>先看代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span> (<span class="params">name,age</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name;</div><div class="line">  <span class="keyword">this</span>.age  = age;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Father.prototype.showname = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'my name is '</span> + <span class="keyword">this</span>.name);</div><div class="line">&#125;</div><div class="line"></div><div class="line">Father.prototype.showage = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'my age is '</span> + <span class="keyword">this</span>.age);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">name,age,job</span>) </span>&#123;</div><div class="line">  <span class="comment">//构造函数伪装，继承父级属性</span></div><div class="line">  Father.call(<span class="keyword">this</span>,name,age);</div><div class="line">  <span class="keyword">this</span>.job = job;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//- 继承父级方法 -- 子级引用父级的方法。这种应用法会使子级方法同时赋给父级</span></div><div class="line"><span class="comment">//- Child.prototype = Father.prototype;</span></div><div class="line"></div><div class="line"><span class="comment">//- 重新给复制方法给子级</span></div><div class="line"><span class="keyword">for</span> ( <span class="keyword">var</span> i <span class="keyword">in</span> Father.prototype) &#123;</div><div class="line">  Child.prototype[i] = Father.prototype[i];</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">Child.prototype.showjob = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'my job is '</span> + <span class="keyword">this</span>.job);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Child(<span class="string">'fly'</span>,<span class="string">'18'</span>,<span class="string">'web design'</span>);</div><div class="line">p1.showjob();</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://flyingliu.github.io/2017/08/15/thisinjs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="飞来小侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="如是我闻">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/15/thisinjs/" itemprop="url">js的this四种调用模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-15T23:54:53+08:00">
                2017-08-15
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/08/15/thisinjs/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/08/15/thisinjs/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在javascript中一共有四种调用模式：方法调用模式，函数调用模式，构造器调用模式，apply调用模式</p>
<h3 id="一、函数调用"><a href="#一、函数调用" class="headerlink" title="一、函数调用"></a>一、函数调用</h3><p>这是函数的最通常用法，属于全局性调用，此时this就代表全局对象window(global).</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">text</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.x = <span class="number">1</span>;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.x);</div><div class="line">&#125;</div><div class="line"></div><div class="line">text();  <span class="comment">// 1</span></div></pre></td></tr></table></figure>
<h3 id="二、作为对象方法调用"><a href="#二、作为对象方法调用" class="headerlink" title="二、作为对象方法调用"></a>二、作为对象方法调用</h3><p>函数还可以作为某个对象的方法调用，这是this就指这个上级对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.x);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> o = &#123;&#125;;</div><div class="line">o.x = <span class="number">1</span>;</div><div class="line">o.m = test;</div><div class="line">o.m(); <span class="comment">// 1</span></div></pre></td></tr></table></figure>
<h3 id="三、作为构造函数调用"><a href="#三、作为构造函数调用" class="headerlink" title="三、作为构造函数调用"></a>三、作为构造函数调用</h3><p>构造函数就是通过这个函数生成一个新对象。这是，this就指这个新对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.x = <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> test();</div><div class="line"><span class="built_in">console</span>.log(o.x);</div></pre></td></tr></table></figure>
<h3 id="四、apply调用"><a href="#四、apply调用" class="headerlink" title="四、apply调用"></a>四、apply调用</h3><p>apply()是函数对象的一个方法，他的作用就是改变函数的调用对象，他的第一个参数就表示改变后的调用这个函数的对象。因此，this指的就是这第一个参数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="number">0</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.x);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> o = &#123;&#125;;</div><div class="line">o.x = <span class="number">1</span>;</div><div class="line">o.m = test;</div><div class="line">o.m.apply();  <span class="comment">// 0</span></div><div class="line">o.m.apply(o); <span class="comment">// 1</span></div></pre></td></tr></table></figure>
<p>apply()的参数为空时，默认调用全局对象。因此，这时的运行结果为0,证明this指的是全局对象。</p>
<p>如果把apply(o)指向这个o，证明了这时this代表的对象是o;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://flyingliu.github.io/2017/08/15/drive/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="飞来小侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="如是我闻">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/15/drive/" itemprop="url">老司机出发了</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-15T23:34:30+08:00">
                2017-08-15
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/08/15/drive/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/08/15/drive/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dicta, impedit!</p>
<p>这是劳动法师德师风大师傅额。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [<span class="string">'once'</span>, <span class="string">'a'</span>, <span class="string">'rebound,'</span>, <span class="string">'always'</span>, <span class="string">'a'</span>, <span class="string">'rebound.'</span>]</div><div class="line"><span class="keyword">var</span> msg = <span class="string">''</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = a.length</div><div class="line">    i &lt; len</div><div class="line">    i++) &#123;</div><div class="line">    msg += a[i] + <span class="string">' '</span></div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(msg)</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://flyingliu.github.io/2017/08/15/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="飞来小侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="如是我闻">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/15/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-15T22:04:15+08:00">
                2017-08-15
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/08/15/hello-world/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/08/15/hello-world/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>note: 使用<a href="https://github.com/hexojs/hexo-deployer-git" target="_blank" rel="external">hexo-deployer-git</a>插件发布时，需要先删除<code>.deploy_git</code>文件夹，然后执行<code>hexo generate</code>。最后再发布。</p>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://flyingliu.github.io/2017/05/08/2017-05-08-heroku/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="飞来小侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="如是我闻">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/08/2017-05-08-heroku/" itemprop="url">发布一个heroku项目。</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-08T21:39:08+08:00">
                2017-05-08
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/08/2017-05-08-heroku/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/05/08/2017-05-08-heroku/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.新建一个<code>Procfile</code>文件，存放启动命令：如</p>
<pre><code>web: node app.js --production
</code></pre><p>–production 为环境标示</p>
<p>2.设置监听端口：</p>
<pre><code>var port = process.env.PORT || 3000;
</code></pre><p><code>process.env.PORT</code>,必须要这样写哦。</p>
<p>3.设置区分环境 set process.env.NODE_ENV = product</p>
<ol start="4">
<li><p>在package.json 文件中设置nodejs引擎<br> “engines”: {</p>
<pre><code>&quot;node&quot;: &quot;^6.9.5&quot;,
&quot;npm&quot;: &quot;^3.10.10&quot;
</code></pre><p> },</p>
</li>
<li><p>登录heroku。</p>
<p> heroku login</p>
</li>
<li><p>创建一个heroku 项目。这是会发现在git中添加了远程仓库地址。</p>
</li>
<li><p>发布到远程仓库。</p>
<p> git push heroku master</p>
</li>
<li><p>指定一个服务器</p>
<p> heroku ps:scale web=1</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://flyingliu.github.io/2016/09/28/2016-07-02-gulp-config/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="飞来小侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="如是我闻">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/28/2016-07-02-gulp-config/" itemprop="url">gulp的配置文件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-09-28T22:08:15+08:00">
                2016-09-28
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/09/28/2016-07-02-gulp-config/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/09/28/2016-07-02-gulp-config/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Gulp 拥有大量的插件可供选用，为了缓解你的选择困难症，我直接推荐一些优秀插件给你吧：</p>
<pre><code>&apos;use strict&apos;;

var argv = require(&apos;yargs&apos;).argv
var _ = require(&apos;lodash&apos;)
var path = require(&apos;path&apos;)
var runSequence = require(&apos;gulp-run-sequence&apos;); 
var sass = require(&apos;gulp-sass&apos;);
var minifyCss = require(&apos;gulp-minify-css&apos;);
var rev = require(&apos;gulp-rev&apos;);
var revCollector = require(&apos;gulp-rev-collector&apos;);
var clean = require(&apos;gulp-clean&apos;);
var gulpif = require(&apos;gulp-if&apos;);
var del = require(&apos;del&apos;);
var minimist = require(&apos;minimist&apos;);
var gutil = require(&apos;gulp-util&apos;);

var gulp = require(&apos;gulp&apos;);
var concat = require(&apos;gulp-concat&apos;);
var cssmin = require(&apos;gulp-cssmin&apos;);
var jshint = require(&apos;gulp-jshint&apos;)
var less = require(&apos;gulp-less&apos;)
var plumber = require(&apos;gulp-plumber&apos;)
var uglify = require(&apos;gulp-uglify&apos;)
var markdown = require(&apos;gulp-markdown&apos;)
var tpl2js = require(&apos;gulp-tpl2js&apos;)
var cssmin = require(&apos;gulp-cssmin&apos;)
var imagemin = require(&apos;gulp-imagemin&apos;)
var cache = require(&apos;gulp-cache&apos;)
var autoprefixer = require(&apos;gulp-autoprefixer&apos;)

var config = require(&apos;./config&apos;).images
var knownOptions = {
  string: &apos;env&apos;,
  default: { env: process.env.NODE_ENV || &apos;dev&apos; }
};
var options = minimist(process.argv.slice(2), knownOptions);
var isDev = options.env === &quot;dev&quot;;



gulp.task(&apos;help&apos;, function() {
    console.log(&apos; gulp watch    文件监控打包&apos;);
    console.log(&apos; gulp server   测试server&apos;);
    console.log(&apos; gulp -p       生产环境（默认生产环境）&apos;);
    console.log(&apos; gulp -d       开发环境&apos;);
});


// 图片压缩---------------------------------
gulp.task(&apos;imagemin&apos;, function(){
    return gulp.src(config.src)
        .pipe(cache(imagemin()))
        .pipe(gulp.dest(config.dist));
});

// Lint Task---------------------------------
gulp.task(&apos;lint&apos;, function() {
    return gulp.src(&apos;js/*.js&apos;)
        .pipe(jshint())
        .pipe(jshint.reporter(&apos;default&apos;));
});


// Less To Css
gulp.task(&apos;less&apos;, function() {
    return gulp.src(&apos;v2.0/**/**/*.less&apos;)
        .pipe(plumber())
        .pipe(less())
        .pipe(autoprefixer({browsers: [&apos;last 2 versions&apos;], cascade: false }))
        .on(&apos;error&apos;,function(e){console.log(e)})
        .pipe(gulp.dest(&apos;v2.0&apos;))
        .pipe(cssmin({compatibility : &apos;ie8&apos;, noAdvanced : true }))
        .pipe(gulp.dest(&apos;dist&apos;));
});

// Less To Css
gulp.task(&apos;less-p&apos;, function() {
    return gulp.src(&apos;p/**/**/*.less&apos;)
        .pipe(less())
        .pipe(autoprefixer({browsers: [&apos;last 2 versions&apos;], cascade: false }))
        .pipe(cssmin({compatibility : &apos;ie8&apos;, noAdvanced : true }))
        .pipe(gulp.dest(&apos;p&apos;))
});

// Copy &amp;&amp; Minify Css
gulp.task(&apos;css&apos;, function() {
    return gulp.src(&apos;v2.0/**/**/*.css&apos;)
        .pipe(cssmin())
        .pipe(gulp.dest(&apos;dist&apos;));
});



// Copy &amp;&amp; Minify html
gulp.task(&apos;html&apos;, function() {
    return gulp.src(&apos;v2.0/**/**/*.html&apos;)
        .pipe(gulp.dest(&apos;dist&apos;));
});

// Converts Markdown to HTML
gulp.task(&apos;markdown&apos;, function () {
    return gulp.src(&apos;*.md&apos;)
        .pipe(markdown())
        .pipe(gulp.dest(&apos;md&apos;));
});

// Concatenate &amp;&amp; Minify JS
gulp.task(&apos;theme&apos;, function() {
    return gulp.src([&apos;theme/**/**/*.js&apos;])
        .pipe(plumber()) //plumber给pipe打补丁
        .pipe(uglify()) // 压缩js
        .pipe(gulp.dest(&apos;dist/theme&apos;)); // 移动到文件夹下
});


// Concatenate &amp;&amp; Minify JS
gulp.task(&apos;scripts&apos;, function() {
    return gulp.src([&apos;v2.0/**/*.js&apos;,&apos;v2.0/**/*.tpl.js&apos;,&apos;p/**/*.js&apos;,&apos;p/**/*.tpl.js&apos;])
        .pipe(plumber()) //plumber给pipe打补丁
        .pipe(uglify()) // 压缩js
        .pipe(gulp.dest(&apos;dist&apos;)); // 移动到文件夹下
});

// jst
gulp.task(&apos;jst&apos;, function() {
    return gulp.src(&apos;v2.0/**/**/*.tpl.html&apos;)
        .pipe(tpl2js({type: &apos;amd&apos;, modBase: &apos;.&apos;}))
        .pipe(gulp.dest(function(file) {
            var hist = file.history[0].replace(/(\\)/g,&apos;/&apos;),
                sp = hist.split(/\/(?![^\/]*\/)/)[0],
                pt = sp.split(&quot;v2.0&quot;)[1];
                pt = pt.split(&quot;.html&quot;)[0];
                console.log(sp);
          return &quot;v2.0&quot;+pt;
        }))
        .pipe(gulp.dest(function(file) {
            var hist = file.history[0].replace(/(\\)/g,&apos;/&apos;),
                sp = hist.split(/\/(?![^\/]*\/)/)[0],
                pt = sp.split(&quot;v2.0&quot;)[1];
          return &quot;dist&quot;+pt;
        }));
});

// jst
gulp.task(&apos;jst-p&apos;, function() {
    return gulp.src(&apos;p/hotspot/comment/*.tpl.html&apos;)
        .pipe(tpl2js({type: &apos;amd&apos;,modBase: &apos;comment&apos;}))
        .pipe(gulp.dest(function(file) {
            var hist = file.history[0].replace(/(\\)/g,&apos;/&apos;),
                sp = hist.split(/\/(?![^\/]*\/)/)[0],
                pt = sp.split(&quot;p/hotspot&quot;)[1];
                console.log(sp);
          return &quot;p/hotspot&quot;+pt;
        }))
        .pipe(gulp.dest(function(file) {
            var hist = file.history[0].replace(/(\\)/g,&apos;/&apos;),
                sp = hist.split(/\/(?![^\/]*\/)/)[0],
                pt = sp.split(&quot;v2.0&quot;)[1];
          return &quot;dist&quot;+pt;
        }));
});




//web server
gulp.task(&apos;server&apos;, function() {
    gulp.src(&apos;./&apos;) // 服务器目录（./代表根目录）
        .pipe(webserver({ // 运行gulp-webserver
            livereload: true, // 启用LiveReload
            port: 8080,
            open: true // 服务器启动时自动打开网页
        }));
});


// Watch Files For Changes
gulp.task(&apos;watch&apos;, function() {
    gulp.watch(&apos;p/**/**/*.less&apos;, [&apos;less-p&apos;]);
    gulp.watch(&apos;v2.0/**/**/*.less&apos;, [&apos;less&apos;]);
    gulp.watch([&apos;v2.0/**/**/*.js&apos;,&apos;!v2.0/**/**/*.tpl.js&apos;], [&apos;scripts&apos;]);
    gulp.watch(&apos;v2.0/**/**/*.html&apos;, [&apos;jst&apos;]);
    gulp.watch(&apos;theme/**/**/*.js&apos;, [&apos;theme&apos;]);

    // livereload.listen();

});

// Default Task
gulp.task(&apos;default&apos;, [&apos;less&apos;,&apos;jst&apos;,&apos;scripts&apos;,&apos;imagemin&apos;, &apos;css&apos;,&apos;theme&apos;,&apos;watch&apos;]);
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://flyingliu.github.io/2016/09/28/2016-04-25-gulp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="飞来小侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="如是我闻">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/28/2016-04-25-gulp/" itemprop="url">gulp的一些总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-09-28T22:08:15+08:00">
                2016-09-28
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/09/28/2016-04-25-gulp/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/09/28/2016-04-25-gulp/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="1、gulp的安装"><a href="#1、gulp的安装" class="headerlink" title="1、gulp的安装"></a>1、gulp的安装</h5><p>首先确保你已经正确安装了nodejs环境。然后以全局方式安装gulp：</p>
<pre><code>npm install -g gulp
</code></pre><p>全局安装gulp后，还需要在每个要使用gulp的项目中都单独安装一次。把目录切换到你的项目文件夹中，然后在命令行中执行：</p>
<pre><code>npm install gulp
</code></pre><p>如果想在安装的时候把gulp写进项目package.json文件的依赖中，则可以加上–save-dev：</p>
<pre><code>npm install --save-dev gulp
</code></pre><p>这样就完成了gulp的安装。至于为什么在全局安装gulp后，还需要在项目中本地安装一次，有兴趣的可以看下stackoverflow上有人做出的回答：why-do-we-need-to-install-gulp-globally-and-locally、what-is-the-point-of-double-install-in-gulp。大体就是为了版本的灵活性，但如果没理解那也不必太去纠结这个问题，只需要知道通常我们是要这样做就行了。</p>
<h5 id="2、开始使用gulp"><a href="#2、开始使用gulp" class="headerlink" title="2、开始使用gulp"></a>2、开始使用gulp</h5><p>2.1 建立gulpfile.js文件</p>
<p>就像gruntjs需要一个Gruntfile.js文件一样，gulp也需要一个文件作为它的主文件，在gulp中这个文件叫做gulpfile.js。新建一个文件名为gulpfile.js的文件，然后放到你的项目目录中。之后要做的事情就是在gulpfile.js文件中定义我们的任务了。下面是一个最简单的gulpfile.js文件内容示例，它定义了一个默认的任务。</p>
<pre><code>var gulp = require(&apos;gulp&apos;);
gulp.task(&apos;default&apos;,function(){
    console.log(&apos;hello world&apos;);
});
</code></pre><p>此时我们的目录结构是这样子的：</p>
<pre><code>├── gulpfile.js
├── node_modules
│ └── gulp
└── package.json
</code></pre><p>2.2 运行gulp任务</p>
<p>要运行gulp任务，只需切换到存放gulpfile.js文件的目录(windows平台请使用cmd或者Power Shell等工具)，然后在命令行中执行gulp命令就行了，gulp后面可以加上要执行的任务名，例如gulp task1，如果没有指定任务名，则会执行任务名为default的默认任务。</p>
<h5 id="3、gulp的API介绍"><a href="#3、gulp的API介绍" class="headerlink" title="3、gulp的API介绍"></a>3、gulp的API介绍</h5><p>使用gulp，仅需知道4个API即可：gulp.task(),gulp.src(),gulp.dest(),gulp.watch()，所以很容易就能掌握，但有几个地方需理解透彻才行，我会在下面一一说明。为了避免出现理解偏差，建议先看一遍官方文档。</p>
<p>3.1 gulp.src()</p>
<p>在介绍这个API之前我们首先来说一下Grunt.js和Gulp.js工作方式的一个区别。Grunt主要是以文件为媒介来运行它的工作流的，比如在Grunt中执行完一项任务后，会把结果写入到一个临时文件中，然后可以在这个临时文件内容的基础上执行其它任务，执行完成后又把结果写入到临时文件中，然后又以这个为基础继续执行其它任务…就这样反复下去。而在Gulp中，使用的是Nodejs中的stream(流)，首先获取到需要的stream，然后可以通过stream的pipe()方法把流导入到你想要的地方，比如Gulp的插件中，经过插件处理后的流又可以继续导入到其他插件中，当然也可以把流写入到文件中。所以Gulp是以stream为媒介的，它不需要频繁的生成临时文件，这也是Gulp的速度比Grunt快的一个原因。再回到正题上来，gulp.src()方法正是用来获取流的，但要注意这个流里的内容不是原始的文件流，而是一个虚拟文件对象流(Vinyl files)，这个虚拟文件对象中存储着原始文件的路径、文件名、内容等信息，这个我们暂时不用去深入理解，你只需简单的理解可以用这个方法来读取你需要操作的文件就行了。其语法为：</p>
<pre><code>gulp.src(globs[, options])
</code></pre><p>globs参数是文件匹配模式(类似正则表达式)，用来匹配文件路径(包括文件名)，当然这里也可以直接指定某个具体的文件路径。当有多个匹配模式时，该参数可以为一个数组。<br>options为可选参数。通常情况下我们不需要用到。</p>
<p>下面我们重点说说Gulp用到的glob的匹配规则以及一些文件匹配技巧。<br>Gulp内部使用了node-glob模块来实现其文件匹配功能。我们可以使用下面这些特殊的字符来匹配我们想要的文件：</p>
<ul>
<li>匹配文件路径中的0个或多个字符，但不会匹配路径分隔符，除非路径分隔符出现在末尾</li>
</ul>
<p>** 匹配路径中的0个或多个目录及其子目录,需要单独出现，即它左右不能有其他东西了。如果出现在末尾，也能匹配文件。</p>
<p>? 匹配文件路径中的一个字符(不会匹配路径分隔符)</p>
<p>[…] 匹配方括号中出现的字符中的任意一个，当方括号中第一个字符为^或!时，则表示不匹配方括号中出现的其他字符中的任意一个，类似js正则表达式中的用法</p>
<pre><code>!(pattern|pattern|pattern) 匹配任何与括号中给定的任一模式都不匹配的

?(pattern|pattern|pattern) 匹配括号中给定的任一模式0次或1次，类似于js正则中的(pattern|pattern|pattern)?

+(pattern|pattern|pattern) 匹配括号中给定的任一模式至少1次，类似于js正则中的(pattern|pattern|pattern)+

*(pattern|pattern|pattern) 匹配括号中给定的任一模式0次或多次，类似于js正则中的(pattern|pattern|pattern)*

@(pattern|pattern|pattern) 匹配括号中给定的任一模式1次，类似于js正则中的(pattern|pattern|pattern)
</code></pre><p>下面以一系列例子来加深理解</p>
<blockquote>
<ul>
<li>能匹配 a.js,x.y,abc,abc/,但不能匹配a/b.js<br><em>.</em> 能匹配 a.js,style.css,a.b,x.y<br><em>/</em>/<em>.js 能匹配 a/b/c.js,x/y/z.js,不能匹配a/b.js,a/b/c/d.js<br><strong> 能匹配 abc,a/b.js,a/b/c.js,x/y/z,x/y/z/a.b,能用来匹配所有的目录和文件
</strong>/</em>.js 能匹配 foo.js,a/foo.js,a/b/foo.js,a/b/c/foo.js<br>a/<strong>/z 能匹配 a/z,a/b/z,a/b/c/z,a/d/g/h/j/k/z<br>a/</strong>b/z 能匹配 a/b/z,a/sb/z,但不能匹配a/x/sb/z,因为只有单**单独出现才能匹配多级目录<br>?.js 能匹配 a.js,b.js,c.js<br>a?? 能匹配 a.b,abc,但不能匹配ab/,因为它不会匹配路径分隔符<br>[xyz].js 只能匹配 x.js,y.js,z.js,不会匹配xy.js,xyz.js等,整个中括号只代表一个字符<br>[^xyz].js 能匹配 a.js,b.js,c.js等,不能匹配x.js,y.js,z.js<br>当有多种匹配模式时可以使用数组</li>
</ul>
</blockquote>
<p>//使用数组的方式来匹配多种文件</p>
<pre><code>gulp.src([&apos;js/*.js&apos;,&apos;css/*.css&apos;,&apos;*.html&apos;])
</code></pre><p>使用数组的方式还有一个好处就是可以很方便的使用排除模式，在数组中的单个匹配模式前加上!即是排除模式，它会在匹配的结果中排除这个匹配，要注意一点的是不能在数组中的第一个元素中使用排除模式</p>
<p>gulp.src([<em>.js,’!b</em>.js’]) //匹配所有js文件，但排除掉以b开头的js文件</p>
<p>gulp.src([‘!b<em>.js’,</em>.js]) //不会排除任何文件，因为排除模式不能出现在数组的第一个元素中</p>
<p>此外，还可以使用展开模式。展开模式以花括号作为定界符，根据它里面的内容，会展开为多个模式，最后匹配的结果为所有展开的模式相加起来得到的结果。展开的例子如下：</p>
<pre><code>a{b,c}d 会展开为 abd,acd
a{b,}c 会展开为 abc,ac
a{0..3}d 会展开为 a0d,a1d,a2d,a3d
a{b,c{d,e}f}g 会展开为 abg,acdfg,acefg
a{b,c}d{e,f}g 会展开为 abdeg,acdeg,abdeg,abdfg
</code></pre><p>3.2 gulp.dest()</p>
<p>gulp.dest()方法是用来写文件的，其语法为：</p>
<pre><code>gulp.dest(path[,options])
</code></pre><p>path为写入文件的路径</p>
<p>options为一个可选的参数对象，通常我们不需要用到</p>
<p>要想使用好gulp.dest()这个方法，就要理解给它传入的路径参数与最终生成的文件的关系。<br>gulp的使用流程一般是这样子的：首先通过gulp.src()方法获取到我们想要处理的文件流，然后把文件流通过pipe方法导入到gulp的插件中，最后把经过插件处理后的流再通过pipe方法导入到gulp.dest()中，gulp.dest()方法则把流中的内容写入到文件中，这里首先需要弄清楚的一点是，我们给gulp.dest()传入的路径参数，只能用来指定要生成的文件的目录，而不能指定生成文件的文件名，它生成文件的文件名使用的是导入到它的文件流自身的文件名，所以生成的文件名是由导入到它的文件流决定的，即使我们给它传入一个带有文件名的路径参数，然后它也会把这个文件名当做是目录名，例如：</p>
<pre><code>var gulp = require(&apos;gulp&apos;);
gulp.src(&apos;script/jquery.js&apos;)
    .pipe(gulp.dest(&apos;dist/foo.js&apos;));
//最终生成的文件路径为 dist/foo.js/jquery.js,而不是dist/foo.js
</code></pre><p>要想改变文件名，可以使用插件gulp-rename</p>
<p>下面说说生成的文件路径与我们给gulp.dest()方法传入的路径参数之间的关系。<br>gulp.dest(path)生成的文件路径是我们传入的path参数后面再加上gulp.src()中有通配符开始出现的那部分路径。例如：</p>
<pre><code>var gulp = reruire(&apos;gulp&apos;);

//有通配符开始出现的那部分路径为 **/*.js

gulp.src(&apos;script/**/*.js&apos;)
    .pipe(gulp.dest(&apos;dist&apos;)); //最后生成的文件路径为 dist/**/*.js
//如果 **/*.js 匹配到的文件为 jquery/jquery.js ,则生成的文件路径为 dist/jquery/jquery.js
</code></pre><p>再举更多一点的例子</p>
<pre><code>gulp.src(&apos;script/avalon/avalon.js&apos;) //没有通配符出现的情况
    .pipe(gulp.dest(&apos;dist&apos;)); //最后生成的文件路径为 dist/avalon.js
</code></pre><p>//有通配符开始出现的那部分路径为 **/underscore.js</p>
<pre><code>gulp.src(&apos;script/**/underscore.js&apos;)
    //假设匹配到的文件为script/util/underscore.js
    .pipe(gulp.dest(&apos;dist&apos;)); //则最后生成的文件路径为 dist/util/underscore.js

gulp.src(&apos;script/*&apos;) //有通配符出现的那部分路径为 *
    //假设匹配到的文件为script/zepto.js    
    .pipe(gulp.dest(&apos;dist&apos;)); //则最后生成的文件路径为 dist/zepto.js
</code></pre><p>通过指定gulp.src()方法配置参数中的base属性，我们可以更灵活的来改变gulp.dest()生成的文件路径。</p>
<p>当我们没有在gulp.src()方法中配置base属性时，base的默认值为通配符开始出现之前那部分路径，例如：</p>
<pre><code>gulp.src(&apos;app/src/**/*.css&apos;) //此时base的值为 app/src
</code></pre><p>上面我们说的gulp.dest()所生成的文件路径的规则，其实也可以理解成，用我们给gulp.dest()传入的路径替换掉gulp.src()中的base路径，最终得到生成文件的路径。</p>
<pre><code>gulp.src(&apos;app/src/**/*.css&apos;) //此时base的值为app/src,也就是说它的base路径为app/src
     //设该模式匹配到了文件 app/src/css/normal.css
    .pipe(gulp.dest(&apos;dist&apos;)) //用dist替换掉base路径，最终得到 dist/css/normal.css
</code></pre><p>所以改变base路径后，gulp.dest()生成的文件路径也会改变</p>
<pre><code>gulp.src(script/lib/*.js) //没有配置base参数，此时默认的base路径为script/lib
    //假设匹配到的文件为script/lib/jquery.js
    .pipe(gulp.dest(&apos;build&apos;)) //生成的文件路径为 build/jquery.js

gulp.src(script/lib/*.js, {base:&apos;script&apos;}) //配置了base参数，此时base路径为script
    //假设匹配到的文件为script/lib/jquery.js
    .pipe(gulp.dest(&apos;build&apos;)) //此时生成的文件路径为 build/lib/jquery.js 
</code></pre><p>用gulp.dest()把文件流写入文件后，文件流仍然可以继续使用。</p>
<p>3.3 gulp.task()</p>
<p>gulp.task方法用来定义任务，内部使用的是Orchestrator，其语法为：</p>
<p>gulp.task(name[, deps], fn)</p>
<p>name 为任务名<br>deps 是当前定义的任务需要依赖的其他任务，为一个数组。当前定义的任务会在所有依赖的任务执行完毕后才开始执行。如果没有依赖，则可省略这个参数<br>fn 为任务函数，我们把任务要执行的代码都写在里面。该参数也是可选的。</p>
<pre><code>gulp.task(&apos;mytask&apos;, [&apos;array&apos;, &apos;of&apos;, &apos;task&apos;, &apos;names&apos;], function() { //定义一个有依赖的任务
  // Do something
});
</code></pre><p>gulp.task()这个API没什么好讲的，但需要知道执行多个任务时怎么来控制任务执行的顺序。</p>
<p>gulp中执行多个任务，可以通过任务依赖来实现。例如我想要执行one,two,three这三个任务，那我们就可以定义一个空的任务，然后把那三个任务当做这个空的任务的依赖就行了：</p>
<p>//只要执行default任务，就相当于把one,two,three这三个任务执行了</p>
<pre><code>gulp.task(&apos;default&apos;,[&apos;one&apos;,&apos;two&apos;,&apos;three&apos;]);
</code></pre><p>如果任务相互之间没有依赖，任务会按你书写的顺序来执行，如果有依赖的话则会先执行依赖的任务。<br>但是如果某个任务所依赖的任务是异步的，就要注意了，gulp并不会等待那个所依赖的异步任务完成，而是会接着执行后续的任务。例如：</p>
<pre><code>gulp.task(&apos;one&apos;,function(){
  //one是一个异步执行的任务
  setTimeout(function(){
    console.log(&apos;one is done&apos;)
  },5000);
});
</code></pre><p>//two任务虽然依赖于one任务,但并不会等到one任务中的异步操作完成后再执行</p>
<pre><code>gulp.task(&apos;two&apos;,[&apos;one&apos;],function(){
  console.log(&apos;two is done&apos;);
});
</code></pre><p>上面的例子中我们执行two任务时，会先执行one任务，但不会去等待one任务中的异步作完成后再执行two任务，而是紧接着执行two任务。所以two任务会在one任务中的异步操作完成之前就执行了。</p>
<p>那如果我们想等待异步任务中的异步操作完成后再执行后续的任务，该怎么做呢？</p>
<p>有三种方法可以实现：</p>
<p>第一：在异步操作完成后执行一个回调函数来通知gulp这个异步任务已经完成,这个回调函数就是任务函数的第一个参数。</p>
<pre><code>gulp.task(&apos;one&apos;,function(cb){ //cb为任务函数提供的回调，用来通知任务已经完成
  //one是一个异步执行的任务
  setTimeout(function(){
    console.log(&apos;one is done&apos;);
    cb();  //执行回调，表示这个异步任务已经完成
  },5000);
});

//这时two任务会在one任务中的异步操作完成后再执行

gulp.task(&apos;two&apos;,[&apos;one&apos;],function(){
  console.log(&apos;two is done&apos;);
});
</code></pre><p>第二：定义任务时返回一个流对象。适用于任务就是操作gulp.src获取到的流的情况。</p>
<pre><code>gulp.task(&apos;one&apos;,function(cb){
  var stream = gulp.src(&apos;client/**/*.js&apos;)
      .pipe(dosomething()) //dosomething()中有某些异步操作
      .pipe(gulp.dest(&apos;build&apos;));
    return stream;
});

gulp.task(&apos;two&apos;,[&apos;one&apos;],function(){
  console.log(&apos;two is done&apos;);
});
</code></pre><p>第三：返回一个promise对象，例如</p>
<pre><code>var Q = require(&apos;q&apos;); //一个著名的异步处理的库 https://github.com/kriskowal/q
gulp.task(&apos;one&apos;,function(cb){
  var deferred = Q.defer();
  // 做一些异步操作
  setTimeout(function() {
     deferred.resolve();
  }, 5000);
  return deferred.promise;
});

gulp.task(&apos;two&apos;,[&apos;one&apos;],function(){
  console.log(&apos;two is done&apos;);
});
</code></pre><p>gulp.task()就这些了，主要是要知道当依赖是异步任务时的处理。</p>
<p>3.4 gulp.watch()</p>
<p>gulp.watch()用来监视文件的变化，当文件发生变化后，我们可以利用它来执行相应的任务，例如文件压缩等。其语法为</p>
<pre><code>gulp.watch(glob[, opts], tasks)
</code></pre><p>glob 为要监视的文件匹配模式，规则和用法与gulp.src()方法中的glob相同。</p>
<p>opts 为一个可选的配置对象，通常不需要用到</p>
<p>tasks 为文件变化后要执行的任务，为一个数组</p>
<pre><code>gulp.task(&apos;uglify&apos;,function(){
  //do something
});
gulp.task(&apos;reload&apos;,function(){
  //do something
});
gulp.watch(&apos;js/**/*.js&apos;, [&apos;uglify&apos;,&apos;reload&apos;]);
gulp.watch()还有另外一种使用方式：

gulp.watch(glob[, opts, cb])
</code></pre><p>glob和opts参数与第一种用法相同</p>
<p>cb参数为一个函数。每当监视的文件发生变化时，就会调用这个函数,并且会给它传入一个对象，该对象包含了文件变化的一些信息，type属性为变化的类型，可以是added,changed,deleted；path属性为发生变化的文件的路径</p>
<pre><code>gulp.watch(&apos;js/**/*.js&apos;, function(event){
    console.log(event.type); //变化类型 added为新增,deleted为删除，changed为改变 
    console.log(event.path); //变化的文件的路径
}); 
</code></pre><h5 id="4、一些常用的gulp插件"><a href="#4、一些常用的gulp插件" class="headerlink" title="4、一些常用的gulp插件"></a>4、一些常用的gulp插件</h5><p>gulp的插件数量虽然没有grunt那么多，但也可以说是应有尽有了，下面列举一些常用的插件。</p>
<p>4.1 自动加载插件</p>
<p>使用gulp-load-plugins<br>安装：npm install –save-dev gulp-load-plugins<br>要使用gulp的插件，首先得用require来把插件加载进来，如果我们要使用的插件非常多，那我们的gulpfile.js文件开头可能就会是这个样子的：</p>
<pre><code>var gulp = require(&apos;gulp&apos;),
    //一些gulp插件,abcd这些命名只是用来举个例子
    a = require(&apos;gulp-a&apos;), 
    b = require(&apos;gulp-b&apos;),
    c = require(&apos;gulp-c&apos;),
    d = require(&apos;gulp-d&apos;),
    e = require(&apos;gulp-e&apos;),
    f = require(&apos;gulp-f&apos;),
    g = require(&apos;gulp-g&apos;),
    //更多的插件...
    z = require(&apos;gulp-z&apos;);   
</code></pre><p>虽然这没什么问题，但会使我们的gulpfile.js文件变得很冗长，看上去不那么舒服。gulp-load-plugins插件正是用来解决这个问题。<br>gulp-load-plugins这个插件能自动帮你加载package.json文件里的gulp插件。例如假设你的package.json文件里的依赖是这样的:</p>
<pre><code>{
  &quot;devDependencies&quot;: {
    &quot;gulp&quot;: &quot;~3.6.0&quot;,
    &quot;gulp-rename&quot;: &quot;~1.2.0&quot;,
    &quot;gulp-ruby-sass&quot;: &quot;~0.4.3&quot;,
    &quot;gulp-load-plugins&quot;: &quot;~0.5.1&quot;
  }
}
</code></pre><p>然后我们可以在gulpfile.js中使用gulp-load-plugins来帮我们加载插件：</p>
<pre><code>var gulp = require(&apos;gulp&apos;);
</code></pre><p>//加载gulp-load-plugins插件，并马上运行它</p>
<pre><code>var plugins = require(&apos;gulp-load-plugins&apos;)();
</code></pre><p>然后我们要使用gulp-rename和gulp-ruby-sass这两个插件的时候，就可以使用plugins.rename和plugins.rubySass来代替了,也就是原始插件名去掉gulp-前缀，之后再转换为驼峰命名。</p>
<p>实质上gulp-load-plugins是为我们做了如下的转换</p>
<pre><code>plugins.rename = require(&apos;gulp-rename&apos;);
plugins.rubySass = require(&apos;gulp-ruby-sass&apos;);
</code></pre><p>gulp-load-plugins并不会一开始就加载所有package.json里的gulp插件，而是在我们需要用到某个插件的时候，才去加载那个插件。<br>最后要提醒的一点是，因为gulp-load-plugins是通过你的package.json文件来加载插件的，所以必须要保证你需要自动加载的插件已经写入到了package.json文件里，并且这些插件都是已经安装好了的。</p>
<p>4.2 重命名</p>
<p>使用gulp-rename<br>安装：npm install –save-dev gulp-rename<br>用来重命名文件流中的文件。用gulp.dest()方法写入文件时，文件名使用的是文件流中的文件名，如果要想改变文件名，那可以在之前用gulp-rename插件来改变文件流中的文件名。</p>
<pre><code>var gulp = require(&apos;gulp&apos;),
    rename = require(&apos;gulp-rename&apos;),
    uglify = require(&quot;gulp-uglify&quot;);

gulp.task(&apos;rename&apos;, function () {
    gulp.src(&apos;js/jquery.js&apos;)
    .pipe(uglify())  //压缩
    .pipe(rename(&apos;jquery.min.js&apos;)) //会将jquery.js重命名为jquery.min.js
    .pipe(gulp.dest(&apos;js&apos;));
    //关于gulp-rename的更多强大的用法请参考https://www.npmjs.com/package/gulp-rename
});
</code></pre><p>4.3 js文件压缩</p>
<p>使用gulp-uglify<br>安装：npm install –save-dev gulp-uglify<br>用来压缩js文件，使用的是uglify引擎</p>
<pre><code>var gulp = require(&apos;gulp&apos;),
    uglify = require(&quot;gulp-uglify&quot;);

gulp.task(&apos;minify-js&apos;, function () {
    gulp.src(&apos;js/*.js&apos;) // 要压缩的js文件
    .pipe(uglify())  //使用uglify进行压缩,更多配置请参考：
    .pipe(gulp.dest(&apos;dist/js&apos;)); //压缩后的路径
});
</code></pre><p>4.4 css文件压缩</p>
<p>使用gulp-minify-css<br>安装：npm install –save-dev gulp-minify-css<br>要压缩css文件时可以使用该插件</p>
<pre><code>var gulp = require(&apos;gulp&apos;),
    minifyCss = require(&quot;gulp-minify-css&quot;);

gulp.task(&apos;minify-css&apos;, function () {
    gulp.src(&apos;css/*.css&apos;) // 要压缩的css文件
    .pipe(minifyCss()) //压缩css
    .pipe(gulp.dest(&apos;dist/css&apos;));
});
</code></pre><p>4.5 html文件压缩</p>
<p>使用gulp-minify-html<br>安装：npm install –save-dev gulp-minify-html<br>用来压缩html文件</p>
<pre><code>var gulp = require(&apos;gulp&apos;),
    minifyHtml = require(&quot;gulp-minify-html&quot;);

gulp.task(&apos;minify-html&apos;, function () {
    gulp.src(&apos;html/*.html&apos;) // 要压缩的html文件
    .pipe(minifyHtml()) //压缩
    .pipe(gulp.dest(&apos;dist/html&apos;));
});
</code></pre><p>4.6 js代码检查</p>
<p>使用gulp-jshint<br>安装：npm install –save-dev gulp-jshint<br>用来检查js代码</p>
<pre><code>var gulp = require(&apos;gulp&apos;),
    jshint = require(&quot;gulp-jshint&quot;);

gulp.task(&apos;jsLint&apos;, function () {
    gulp.src(&apos;js/*.js&apos;)
    .pipe(jshint())
    .pipe(jshint.reporter()); // 输出检查结果
});
</code></pre><p>4.7 文件合并</p>
<p>使用gulp-concat<br>安装：npm install –save-dev gulp-concat<br>用来把多个文件合并为一个文件,我们可以用它来合并js或css文件等，这样就能减少页面的http请求数了</p>
<pre><code>var gulp = require(&apos;gulp&apos;),
    concat = require(&quot;gulp-concat&quot;);

gulp.task(&apos;concat&apos;, function () {
    gulp.src(&apos;js/*.js&apos;)  //要合并的文件
    .pipe(concat(&apos;all.js&apos;))  // 合并匹配到的js文件并命名为 &quot;all.js&quot;
    .pipe(gulp.dest(&apos;dist/js&apos;));
});
</code></pre><p>4.8 less和sass的编译</p>
<p>less使用gulp-less,安装：npm install –save-dev gulp-less</p>
<pre><code>var gulp = require(&apos;gulp&apos;),
    less = require(&quot;gulp-less&quot;);

gulp.task(&apos;compile-less&apos;, function () {
    gulp.src(&apos;less/*.less&apos;)
    .pipe(less())
    .pipe(gulp.dest(&apos;dist/css&apos;));
});
</code></pre><p>sass使用gulp-sass,安装：npm install –save-dev gulp-sass</p>
<pre><code>var gulp = require(&apos;gulp&apos;),
    sass = require(&quot;gulp-sass&quot;);

gulp.task(&apos;compile-sass&apos;, function () {
    gulp.src(&apos;sass/*.sass&apos;)
    .pipe(sass())
    .pipe(gulp.dest(&apos;dist/css&apos;));
});
</code></pre><p>4.9 图片压缩</p>
<p>可以使用gulp-imagemin插件来压缩jpg、png、gif等图片。<br>安装：npm install –save-dev gulp-imagemin</p>
<pre><code>var gulp = require(&apos;gulp&apos;);
var imagemin = require(&apos;gulp-imagemin&apos;);
var pngquant = require(&apos;imagemin-pngquant&apos;); //png图片压缩插件

gulp.task(&apos;default&apos;, function () {
    return gulp.src(&apos;src/images/*&apos;)
        .pipe(imagemin({
            progressive: true,
            use: [pngquant()] //使用pngquant来压缩png图片
        }))
        .pipe(gulp.dest(&apos;dist&apos;));
});
</code></pre><p>gulp-imagemin的使用比较复杂一点，而且它本身也有很多插件，建议去它的项目主页看看文档</p>
<p>4.10 自动刷新</p>
<p>使用gulp-livereload插件，安装:npm install –save-dev gulp-livereload。<br>当代码变化时，它可以帮我们自动刷新页面<br>该插件最好配合谷歌浏览器来使用，且要安装livereload chrome extension扩展插件,不能下载的请自行FQ。</p>
<pre><code>var gulp = require(&apos;gulp&apos;),
    less = require(&apos;gulp-less&apos;),
    livereload = require(&apos;gulp-livereload&apos;);

gulp.task(&apos;less&apos;, function() {
  gulp.src(&apos;less/*.less&apos;)
    .pipe(less())
    .pipe(gulp.dest(&apos;css&apos;))
    .pipe(livereload());
});

gulp.task(&apos;watch&apos;, function() {
  livereload.listen(); //要在这里调用listen()方法
  gulp.watch(&apos;less/*.less&apos;, [&apos;less&apos;]);
});
</code></pre><p>如对gulp还有什么不明白之处，或者本文有什么遗漏或错误，欢迎一起交流和探讨~</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://flyingliu.github.io/2016/04/10/2016-04-10-js-extend/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="飞来小侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="如是我闻">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/10/2016-04-10-js-extend/" itemprop="url">理解JS构造函数继承</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-10T21:02:41+08:00">
                2016-04-10
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/04/10/2016-04-10-js-extend/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/04/10/2016-04-10-js-extend/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>对象之间的继承有以下几个方法：</p>
<p>用call和apply(不推荐单独使用，定义在prototype中的属性和方法不能继承)</p>
<p>prototype模式(注意prototype需要先继承后定义)</p>
<p>传统prototype模式(推荐，关键点是<code>Child.prototype = new Parent.prototype</code>以及重新改变<code>Child.prototype.constructor</code>)</p>
<p>利用空对象间接继承(只继承prototype中的属性，关键点在于利用一个空的构造函数当中介)</p>
<p>拷贝继承(不推荐单独使用，for循环逐一拷贝)</p>
<p>以上推荐使用传统prototype模式以及call和apply与拷贝继承相配合的模式</p>
<h5 id="用call和apply"><a href="#用call和apply" class="headerlink" title="用call和apply"></a>用call和apply</h5><pre><code>function Chinese() {
    this.nationality = &quot;Chinese&quot;;
}
function Person(name, age) {
    Chinese.apply(this); //这里改变了Chinese中this的指向
    this.name = name;
    this.age = age;
}
var p1 = new Person(&quot;Oli&quot;, 18);
console.log(p1.nationality); //Chinese
</code></pre><h5 id="传统prototype模式"><a href="#传统prototype模式" class="headerlink" title="传统prototype模式"></a>传统prototype模式</h5><pre><code>function Chinese() {
    this.nationality = &quot;Chinese&quot;;
}
function Person(name, age) {
    this.name = name;
    this.age = age;
}
Person.prototype = new Chinese(); //这里因为在prototype中使用了new，则会指向Chinese
console.log(Person.prototype.constructor); //Chinese(){}
Person.prototype.constructor = Person; //这里需要把constructor构造函数重新改为Person
console.log(Person.prototype.constructor); //Person(){}
var p1 = new Person(&quot;Oli&quot;, 18);
console.log(p1.nationality); //Chinese
</code></pre><p>需要注意的是：在继承中，如果替换了prototype，那么新的prototype必须修改constructor属性，将这个属性指回到原来的构造函数。</p>
<h5 id="利用空对象间接继承"><a href="#利用空对象间接继承" class="headerlink" title="利用空对象间接继承"></a>利用空对象间接继承</h5><pre><code>function Chinese() {}
Chinese.prototype.nationality = &quot;Chinese&quot;;

function Person(name, age) {
    this.name = name;
    this.age = age;
}

function F(){}; //空对象几乎不占用内存
F.prototype = Chinese.prototype;
Person.prototype = new F();
Person.prototype.constructor = Person;

Person.prototype.sayName = function() { //Person的prototype中的方法和属性需要在继承之后定义
    console.log(this.name);
};

var p1 = new Person(&quot;Oli&quot;, 18);
console.log(p1.nationality); //Chinese
p1.sayName(); //Oli
</code></pre><h5 id="可以将该方法定义为函数："><a href="#可以将该方法定义为函数：" class="headerlink" title="可以将该方法定义为函数："></a>可以将该方法定义为函数：</h5><pre><code>function extend(Child, Parent) {
    var F = function() {};
    F.prototype = Parent.prototype;
    Child.prototype = new F();
    Child.prototype.constructor = Child;
    Child.uber = Parent.prototype; //用于访问父对象的prototype，可用可不用
}
</code></pre><p>举例：</p>
<pre><code>function extend(Child, Parent) {
    var F = function() {};
    F.prototype = Parent.prototype;
    Child.prototype = new F();
    Child.prototype.constructor = Child;
    Child.uber = Parent.prototype;
}

function Chinese() {}
Chinese.prototype.nationality = &quot;Chinese&quot;;

function Person(name, age) {
    this.name = name;
    this.age = age;
}

extend(Person, Chinese);

Person.prototype.sayName = function() {
    console.log(this.name);
};

var p1 = new Person(&quot;Oli&quot;, 18);
console.log(p1.nationality); //Chinese
p1.sayName(); //Oli
</code></pre><h5 id="拷贝继承"><a href="#拷贝继承" class="headerlink" title="拷贝继承"></a>拷贝继承</h5><p>使用下面的函数逐一将prototype的属性和函数拷贝到对象中：</p>
<pre><code>function extend(Child, Parent) {　　　　
    var p = Parent.prototype;　　　　
    var c = Child.prototype;　　　　
    for (var i in p) {　　　　　　
        c[i] = p[i];　　　　　　
    }　　　　
    c.uber = p;　　
}
</code></pre><h5 id="不需要先继承后定义"><a href="#不需要先继承后定义" class="headerlink" title="不需要先继承后定义"></a>不需要先继承后定义</h5><p>传统prototype模式继承（例子）</p>
<pre><code>function Parent() {
    this.name = &quot;thisIsName&quot;;
}
Parent.prototype.sayName = function() {
    return this.name;
};

function Child() {
    this.age = &quot;thisIsAge&quot;;
}

Child.prototype = new Parent();
Child.prototype.constructor = Child;

Child.prototype.sayAge = function() {
    return this.age;
};

var c = new Child();
console.log(c.name);
console.log(c.age);
console.log(c.sayName());
console.log(c.sayAge());
</code></pre><h5 id="call和apply与拷贝继承相配合（例子）"><a href="#call和apply与拷贝继承相配合（例子）" class="headerlink" title="call和apply与拷贝继承相配合（例子）"></a>call和apply与拷贝继承相配合（例子）</h5><pre><code>function extend(C, P) {
    var p = P.prototype;
    var c = C.prototype;
    for(var i in p){
        c[i] = p[i];
    }
    c.uber = p;
}

function Parent() {
    this.name = &quot;thisIsName&quot;;
}
Parent.prototype.sayName = function() {
    return this.name;
};

function Child() {
    Parent.apply(this); //继承构造函数内的属性和方法
    this.age = &quot;thisIsAge&quot;;
}

Child.prototype.sayAge = function() {
    return this.age;
};

extend(Child, Parent); //不需要先继承后定义

var c = new Child();
console.log(c.name);
console.log(c.age);
console.log(c.sayName());
console.log(c.sayAge());
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://flyingliu.github.io/2016/04/10/2016-04-10-js-jicheng/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="飞来小侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="如是我闻">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/10/2016-04-10-js-jicheng/" itemprop="url">JavaScript 继承方式的概念</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-10T20:22:57+08:00">
                2016-04-10
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/04/10/2016-04-10-js-jicheng/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/04/10/2016-04-10-js-jicheng/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>js 中实现继承有两种常用方式：</p>
<p><em>. 原型链继承（对象间的继承）
</em>. 类式继承（构造函数间的继承）</p>
<p>JavaScript不是真正的面向对象的语言，想实现继承可以用JS的原型prototype机制或者call和apply方法</p>
<p>在面向对象的语言中，可以使用类来创建一个自定义对象，当然ES6中也引入了class来创建类。在这之前，我们需要使用js的原型来创建自定义对象。</p>
<h5 id="类继承是在子类型构造函数的内部调用父类型的构造函数"><a href="#类继承是在子类型构造函数的内部调用父类型的构造函数" class="headerlink" title="类继承是在子类型构造函数的内部调用父类型的构造函数"></a>类继承是在子类型构造函数的内部调用父类型的构造函数</h5><pre><code>function Super (){
    this.colors = [&quot;blue&quot;,&quot;red&quot;];
}

function Sub () {
    Super.call(this);
}
</code></pre><h5 id="原型式继承是借助已有的对象创建新的对象，将子类的原型指向父类。"><a href="#原型式继承是借助已有的对象创建新的对象，将子类的原型指向父类。" class="headerlink" title="原型式继承是借助已有的对象创建新的对象，将子类的原型指向父类。"></a>原型式继承是借助已有的对象创建新的对象，将子类的原型指向父类。</h5><pre><code>function Super (id) {
    this.id = id;
}
Super.prototype.toString = function () {
    return &apos;Super&apos; + this.id;
}

function Sub (id) {
    this.id = id;
}

Sub.prototype = new Super();  // 这句即原型式继承的核心代码
</code></pre><h5 id="原型链继承"><a href="#原型链继承" class="headerlink" title="原型链继承"></a>原型链继承</h5><p>为了让子类继承父类的属性和方法，首先需要定义一个构造函数，然后将父类的实例赋值给构造函数的原型。</p>
<pre><code>function Parent () {
    this.name = &apos;Parent&apos;;
}

function Child () {
    this.age = 10;
}
Chid.prototype = new Parent();  // Chid继承Parent,形成原型链

var test = new Child();
console.log(test.name) // Parent
console.log(test.age)  // 10    得到被继承的属性

// 继续原型链继承
function Brother () {
    this.weight = 60;
}
Brother.prototype = new Child();
var peter = new Brother();
console.log(peter.name)  //继承了Child和Parent,输出Parent
console.log(peter.age)  // 输出10
</code></pre><p>所有的构造函数都继承自Object,它是自动完成继承的并不需要我们手动继承，那么接着看它们的从属关系</p>
<h5 id="确定原型和实例的关系"><a href="#确定原型和实例的关系" class="headerlink" title="确定原型和实例的关系"></a>确定原型和实例的关系</h5><p>可以通过两种方式确定原型和实例的关系，通过操作符instanceof和isPrototypeof()方法</p>
<pre><code>console.log(peter instanceof Object); //true
console.log(test instanceof Brother)  //false,test是brother的父类
console.log(peter instanceof Child) //true
console.log(peter instanceof Parent)  //true
</code></pre><p>只要是原型链中出现过的原型，都可以说是改原型链派生的实例的原型。因此，isProtptypeof()方法也会返回true</p>
<p>在JS中，被继承的函数成为父类（或者 基类、超类），继承的函数成为子类（派生类）。使用原型继承主要有两个问题，一是字面量重写原型会中断关系，使用引用类型的原型，并且子类型无法给父类型传递参数。</p>
<p>伪类解决引用共享和超类型无法传参的问题，我们可以采用’类式继承’的方式</p>
<h5 id="类式继承-借用构造函数"><a href="#类式继承-借用构造函数" class="headerlink" title="类式继承(借用构造函数)"></a>类式继承(借用构造函数)</h5><pre><code>function Parent (age) {
    this.colors = [&quot;blue&quot;,&quot;red&quot;,&quot;green&quot;];
    this.age = age;
}

function Child (age) {
    Parent.call(this,age);
}

var peter = new Child(20);
console.log(peter.age) //20
console.log(peter.colors) //blue,red,green

peter.colors.push(&quot;white&quot;);
console.log(peter.colors) //blue,red,green,white
</code></pre><p>借用构造函数虽然解决了上面两张问题，但没有原型，所以我们需要原型链+借用构造函数的模式，这种模式成为组合继承</p>
<h5 id="组合继承"><a href="#组合继承" class="headerlink" title="组合继承"></a>组合继承</h5><pre><code>function Parent (age) {
    this.colors = [&quot;blue&quot;,&quot;red&quot;,&quot;green&quot;];
    this.age = age;
}

Parent.prototype.run = function () {
    return this.colors + &apos; is &apos; +this.age;
}
function Child (age) {
    Parent.call(this,age);  //对象冒充，给父类型传参
}
Child.prototype = new Parent();  //原型链继承

var peter = new Child(20);
console.log(peter.run()); //blue,red,green is 20
</code></pre><p>组合继承是一种比较常用的方法，思路是使用原型链实现对原型属性和方法的继承，借用构造函数来实现对实例属性的继承。这样，既实现了原型上定义方法的函数复用，又保证每个实例都有自己的属性。</p>
<p>call()与apply()的用法：调用一个对象的一个方法，用另一个对象替换当前对象。</p>
<pre><code>call(thisObj,Object);  // call接收一个对象
apply(thisObj，[argArray])  //apply接收一个数组
</code></pre><h5 id="原型式继承"><a href="#原型式继承" class="headerlink" title="原型式继承"></a>原型式继承</h5><p>这种继承借助原型并基于已有的对象创建新的对象，同时还不用创建自定义类型的方式成为原型式继承</p>
<pre><code>function obj(o) {
    function F() {}
    F.prototype = o;
    return new F();
}

var box = {
        name : &apos;peter&apos;,
        arr : [&apos;blue&apos;,&apos;red&apos;,&apos;green&apos;]
    };

var b1 = obj(box);
console.log(b1.name) // peter

b1.name = &apos;jack&apos;;
console.log(b1.name) //jack

console.log(b1.arr) //blue,red,green
b1.arr.push(&apos;white&apos;) //blue,red,green,white

var b2 = obj(box);
console.log(b2.name) // peter
console.log(b1.arr) //blue,red,green
</code></pre><p>原型式继承首先在obj()</p>
<p>函数内部创建一个临时性的构造函数，然后将传入的对象作为这个构造函数的原型，最后返回这个临时类型的新实例。</p>
<h5 id="寄生式继承"><a href="#寄生式继承" class="headerlink" title="寄生式继承"></a>寄生式继承</h5><p>这种继承方式是把原型式+工厂模式结合起来，目的是为了封装创建的过程。</p>
<pre><code>function create(o){
        var f = obj(o);
        f.run = function () {
            return this.arr;//同样，会共享引用
        };
        return f;
    }
</code></pre><h5 id="组合式继承的问题"><a href="#组合式继承的问题" class="headerlink" title="组合式继承的问题"></a>组合式继承的问题</h5><p>组合式继承是JS最常用的继承模式，但组合继承的父类型会在使用过程中被调用两次，一次是创建子类型的时候，另一次是在子类型构造函数的内部</p>
<pre><code>function Parent(name){
        this.name = name;
        this.arr = [&apos;哥哥&apos;,&apos;妹妹&apos;,&apos;父母&apos;];
    }

    Parent.prototype.run = function () {
        return this.name;
    };

    function Child(name,age){
        Parent.call(this,age);//第二次调用
        this.age = age;
    }

    Child.prototype = new Parent();//第一次调用
</code></pre><p>以上代码是组合继承，那么寄生组合继承解决了两次调用的问题</p>
<h5 id="寄生组合继承"><a href="#寄生组合继承" class="headerlink" title="寄生组合继承"></a>寄生组合继承</h5><pre><code>function obj() {
    function F() {}
    F.prototype = o;
    return new F();
}
function create(parent,test) {
    var f = obj(parent.prototype); //创建对象
    f.constructor = test; //增强对象
}
function Parent(name){
        this.name = name;
        this.arr = [&apos;brother&apos;,&apos;sister&apos;,&apos;parents&apos;];
    }

Parent.prototype.run = function () {
        return this.name;
    };

function Child(name,age){
        Parent.call(this,name);
        this.age =age;
    }
inheritPrototype(Parent,Child);  //通过这里实现继承

var test = new Child(&apos;peter&apos;,20);
test.arr.push(&apos;new&apos;);
console.log(test.arr);  //brother,sister,parents,new
console.log(test.run());  //只共享了方法

var test2 = new Child(&apos;jack&apos;,22);
console.log(test2.arr);  //引用问题解决
</code></pre><h5 id="call和apply"><a href="#call和apply" class="headerlink" title="call和apply"></a>call和apply</h5><p>call和apply可以用来改变函数中this的指向:</p>
<pre><code>// 定义一个全局函数
function f () {
    console.log(this.name);
}
// 定义一个全局变量
var name = &apos;peter&apos;;
var obj = {
    name: &apos;jack&apos;;
};

f.apply(window); //apple, 此时this 等于window  相当于window.f()
f.apply(obj);  //jack, 此时this === obj 相当于obj.f()
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="飞来小侠" />
          <p class="site-author-name" itemprop="name">飞来小侠</p>
           
              <p class="site-description motion-element" itemprop="description">依法不依人，依义不依语。</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">58</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">19</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/flyingliu" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/5872146656" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                    
                      Weibo
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.douban.com/people/guolaiwan/" target="_blank" title="豆瓣">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      豆瓣
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/liu-fei-lai/activities" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      知乎
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">飞来小侠</span>

  
</div>


  <div class="powered-by">
    由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
  </div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">
    主题 &mdash;
    <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
      NexT.Pisces
    </a>
  </div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  

    
      <script id="dsq-count-scr" src="https://ananfo.disqus.com/count.js" async></script>
    

    

  




	





  










  





  

  

  

  

  

  

</body>
</html>
